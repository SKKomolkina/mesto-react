{"ast":null,"code":"import _toConsumableArray from\"/Users/meowmeow/development/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/meowmeow/development/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import Header from'./Header';import Main from'./Main';import Footer from'./Footer';import ImagePopup from'./ImagePopup';import EditAvatarPopup from'./EditAvatarPopup';import EditProfilePopup from'./EditProfilePopup';import AddPlacePopup from'./AddPlacePopup';import api from'../utils/api';import{CurrentUserContext}from'../contexts/CurrentUserContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),currentUser=_React$useState2[0],setCurrentUser=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isEditAvatarPopupOpen=_React$useState4[0],setIsEditAvatarPopupOpen=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isEditProfilePopupOpen=_React$useState6[0],setIsEditProfilePopupOpen=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isAddPlacePopupOpen=_React$useState8[0],setIsAddPlacePopupOpen=_React$useState8[1];var _React$useState9=React.useState({name:'',link:''}),_React$useState10=_slicedToArray(_React$useState9,2),selectedCard=_React$useState10[0],setSelectedCard=_React$useState10[1];var _React$useState11=React.useState([]),_React$useState12=_slicedToArray(_React$useState11,2),cards=_React$useState12[0],setCards=_React$useState12[1];React.useEffect(function(){api.getUserData().then(function(data){setCurrentUser(data);}).catch(function(err){return console.log(err);});},[]);React.useEffect(function(){api.getInitialCards().then(function(cards){console.log(cards);setCards(cards);}).catch(function(err){console.log(err);});},[]);function handleEditAvatarClick(){setIsEditAvatarPopupOpen(true);}function handleEditProfileClick(){setIsEditProfilePopupOpen(true);}function handleAddPlaceClick(){setIsAddPlacePopupOpen(true);}function handleUpdateUser(_ref){var name=_ref.name,about=_ref.about;api.editProfile(name,about).then(function(data){console.log(data);setCurrentUser({name:name,about:about});setIsEditProfilePopupOpen(false);}).catch(function(err){console.log(err);});}function handleCardClick(selectedCard){setSelectedCard({name:selectedCard.name,link:selectedCard.link});}function handleUpdateAvatar(_ref2){var avatar=_ref2.avatar;api.changeAvatar(avatar).then(function(data){setCurrentUser(data);setIsEditAvatarPopupOpen(false);}).catch(function(err){return console.log(err);});}function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});var changeLike=isLiked?api.deleteLike(card._id):api.setLike(card._id);changeLike.then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});}).catch(function(err){return console.log(err);});}function handleCardDelete(card){api.deleteCard(card._id).then(function(){var newCard=cards.filter(function(c){return c._id!==card._id;});setCards(newCard);}).catch(function(err){return console.log(err);});}function handleAddPlaceSubmit(card){api.addCard(card.name,card.link).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));setIsAddPlacePopupOpen(false);}).catch(function(err){return console.log(err);});}function closeAllPopups(){setIsEditAvatarPopupOpen(false);setIsEditProfilePopupOpen(false);setIsAddPlacePopupOpen(false);setSelectedCard({name:'',link:''});}return/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsxs(\"div\",{className:\"root\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{onEditAvatar:handleEditAvatarClick,onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onCardClick:handleCardClick,onCardLike:handleCardLike,onCardDelete:handleCardDelete,cards:cards}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,onClose:closeAllPopups}),/*#__PURE__*/_jsx(Footer,{})]})});}export default App;","map":{"version":3,"sources":["/Users/meowmeow/development/mesto-react/src/components/App.js"],"names":["React","Header","Main","Footer","ImagePopup","EditAvatarPopup","EditProfilePopup","AddPlacePopup","api","CurrentUserContext","App","useState","currentUser","setCurrentUser","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","name","link","selectedCard","setSelectedCard","cards","setCards","useEffect","getUserData","then","data","catch","err","console","log","getInitialCards","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","handleUpdateUser","about","editProfile","handleCardClick","handleUpdateAvatar","avatar","changeAvatar","handleCardLike","card","isLiked","likes","some","i","_id","changeLike","deleteLike","setLike","newCard","state","map","c","handleCardDelete","deleteCard","filter","handleAddPlaceSubmit","addCard","closeAllPopups"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport ImagePopup from './ImagePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport AddPlacePopup from './AddPlacePopup';\n\nimport api from '../utils/api';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction App() {\n    const [currentUser, setCurrentUser] = React.useState({});\n\n    const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n    const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n    const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n\n    const [selectedCard, setSelectedCard] = React.useState({ name: '', link: '' });\n\n    const [cards, setCards] = React.useState([]);\n\n\n    React.useEffect(() => {\n        api.getUserData()\n            .then((data) => {\n                setCurrentUser(data);\n            })\n            .catch((err) => console.log(err));\n    }, []);\n\n    React.useEffect(() => {\n        api.getInitialCards()\n            .then((cards) => {\n                console.log(cards);\n                setCards(cards);\n            })\n            .catch((err) => {\n                console.log(err);\n            })\n\n    }, []);\n\n\n    function handleEditAvatarClick() {\n        setIsEditAvatarPopupOpen(true);\n    }\n\n    function handleEditProfileClick() {\n        setIsEditProfilePopupOpen(true);\n    }\n\n    function handleAddPlaceClick() {\n        setIsAddPlacePopupOpen(true);\n    }\n\n    function handleUpdateUser({ name, about }) {\n        api.editProfile(name, about)\n            .then((data) => {\n                console.log(data);\n                setCurrentUser({ name, about });\n                setIsEditProfilePopupOpen(false);\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    }\n\n    function handleCardClick(selectedCard) {\n        setSelectedCard({ name: selectedCard.name, link: selectedCard.link });\n    }\n\n    function handleUpdateAvatar({ avatar}) {\n        api.changeAvatar(avatar)\n            .then((data) => {\n                setCurrentUser(data);\n                setIsEditAvatarPopupOpen(false);\n            })\n            .catch((err) => console.log(err));\n    }\n\n    function handleCardLike(card) {\n        const isLiked = card.likes.some(i => i._id === currentUser._id);\n        const changeLike = isLiked ? api.deleteLike(card._id) : api.setLike(card._id)\n        changeLike.then((newCard) => {\n            setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n        })\n            .catch((err) => console.log(err));\n    }\n\n    function handleCardDelete(card) {\n        api.deleteCard(card._id)\n            .then(() => {\n                const newCard = cards.filter((c) => c._id !== card._id);\n                setCards(newCard);\n            })\n            .catch((err) => console.log(err));\n    }\n\n    function handleAddPlaceSubmit(card) {\n        api.addCard(card.name, card.link)\n            .then((newCard) => {\n                setCards([newCard, ...cards]);\n                setIsAddPlacePopupOpen(false);\n            })\n            .catch((err) => console.log(err));\n    }\n\n    function closeAllPopups() {\n        setIsEditAvatarPopupOpen(false);\n        setIsEditProfilePopupOpen(false);\n        setIsAddPlacePopupOpen(false);\n\n        setSelectedCard({ name: '', link: '' });\n    }\n\n\n\n    return (\n        <CurrentUserContext.Provider value={currentUser}>\n            <div className=\"root\">\n                <Header />\n\n                <Main\n                    onEditAvatar={handleEditAvatarClick}\n                    onEditProfile={handleEditProfileClick}\n                    onAddPlace={handleAddPlaceClick}\n\n                    onCardClick={handleCardClick}\n                    onCardLike={handleCardLike}\n                    onCardDelete={handleCardDelete}\n\n                    cards={cards}\n                />\n\n                <EditAvatarPopup\n                    isOpen={isEditAvatarPopupOpen}\n                    onClose={closeAllPopups}\n\n                    onUpdateAvatar={handleUpdateAvatar}\n                />\n\n                <EditProfilePopup\n                    isOpen={isEditProfilePopupOpen}\n                    onClose={closeAllPopups}\n\n                    onUpdateUser={handleUpdateUser}\n                />\n\n                <AddPlacePopup\n                    isOpen={isAddPlacePopupOpen}\n                    onClose={closeAllPopups}\n\n                    onAddPlace={handleAddPlaceSubmit}\n                />\n\n                <ImagePopup\n                    card={selectedCard}\n                    onClose={closeAllPopups}\n                />\n\n                <Footer />\n\n                {/* POPUP_DELETE-CARD */}\n                {/* <div className=\"popup popup-delete\">\n                <button className=\"button-close popup__cross popup__cross_btn_close-photo popup__button-close\"\n                    type=\"button\"></button>\n                <form className=\"popup__form popup__form_delete\" name=\"delete-form\">\n\n                </form>\n            </div> */}\n\n\n\n            </div>\n        </CurrentUserContext.Provider>\n    );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}