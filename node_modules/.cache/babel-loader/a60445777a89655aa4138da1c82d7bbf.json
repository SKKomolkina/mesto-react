{"ast":null,"code":"import _slicedToArray from\"/Users/meowmeow/development/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{api}from'./../utils/Api';import{CurrentUserContext}from'../contexts/CurrentUserContext';import Card from'./Card.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Main(props){var onEditAvatar=props.onEditAvatar,onEditProfile=props.onEditProfile,onAddPlace=props.onAddPlace,onCardClick=props.onCardClick;var user=React.useContext(CurrentUserContext);var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),cards=_React$useState2[0],setCards=_React$useState2[1];React.useEffect(function(){api.getInitialCards().then(function(cards){console.log(cards);setCards(cards);}).catch(function(err){console.log(err);});},[]);function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===user._id;});api.setLike(card._id,!isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});});}function handleCardDelete(card){var isOwn=card.owner._id===user._id;api.deleteCard(card._id,!isOwn).then(function(card){setCards(function(state){return state.filter(function(c){return c._id===card._id?card:c;});});});}return/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(\"section\",{className:\"profile\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile__container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile__photo-wrapper\",onClick:onEditAvatar,children:/*#__PURE__*/_jsx(\"img\",{name:\"avatar\",src:user.avatar,alt:\"\\u0412\\u0430\\u0448\\u0435 \\u0444\\u043E\\u0442\\u043E\",className:\"profile__photo\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile__info\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"profile__name\",children:user.name}),/*#__PURE__*/_jsx(\"button\",{className:\"profile__btn-edit\",type:\"button\",value:\"\",onClick:onEditProfile}),/*#__PURE__*/_jsx(\"p\",{className:\"profile__about\",children:user.about})]}),/*#__PURE__*/_jsx(\"button\",{className:\"profile__btn-add\",type:\"button\",onClick:onAddPlace})]})}),/*#__PURE__*/_jsx(\"section\",{className:\"photos\",children:cards.map(function(card){return/*#__PURE__*/_jsx(Card,{card:card,onCardClick:onCardClick,onCardLike:handleCardLike},card._id);})})]});}export default Main;","map":{"version":3,"sources":["/Users/meowmeow/development/mesto-react/src/components/Main.js"],"names":["React","api","CurrentUserContext","Card","Main","props","onEditAvatar","onEditProfile","onAddPlace","onCardClick","user","useContext","useState","cards","setCards","useEffect","getInitialCards","then","console","log","catch","err","handleCardLike","card","isLiked","likes","some","i","_id","setLike","newCard","state","map","c","handleCardDelete","isOwn","owner","deleteCard","filter","avatar","name","about"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { api } from './../utils/Api';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nimport Card from './Card.js';\n\nfunction Main(props) {\n    const { onEditAvatar, onEditProfile, onAddPlace, onCardClick } = props;\n\n    const user = React.useContext(CurrentUserContext);\n\n    const [cards, setCards] = React.useState([]);\n\n    React.useEffect(() => {\n        api.getInitialCards()\n            .then((cards) => {\n                console.log(cards);\n                setCards(cards);\n            })\n            .catch((err) => {\n                console.log(err);\n            })\n    }, [])\n\n    function handleCardLike(card) {\n        const isLiked = card.likes.some(i => i._id === user._id);\n\n        api.setLike(card._id, !isLiked)\n            .then((newCard) => {\n                setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n            });\n    }\n\n    function handleCardDelete(card) {\n        const isOwn = card.owner._id === user._id;\n\n        api.deleteCard(card._id, !isOwn)\n            .then((card) => {\n                setCards((state) => state.filter((c) => c._id === card._id ? card : c))\n            })\n    }\n\n    return (\n        <main>\n            <section className=\"profile\">\n                <div className=\"profile__container\">\n                    <div className=\"profile__photo-wrapper\" onClick={onEditAvatar}>\n                        <img name=\"avatar\"\n                            src={user.avatar}\n                            alt=\"Ваше фото\" className=\"profile__photo\" />\n                    </div>\n\n                    <div className=\"profile__info\">\n                        <h1 className=\"profile__name\">{user.name}</h1>\n                        <button className=\"profile__btn-edit\" type=\"button\" value=\"\" onClick={onEditProfile}></button>\n                        <p className=\"profile__about\">{user.about}</p>\n                    </div>\n\n                    <button className=\"profile__btn-add\" type=\"button\" onClick={onAddPlace}></button>\n                </div>\n            </section>\n\n            <section className=\"photos\">\n                {cards.map(card => <Card\n                    card={card}\n                    key={card._id}\n                    onCardClick={onCardClick}\n                    onCardLike={handleCardLike} />)}\n            </section>\n        </main>\n    )\n}\n\nexport default Main"]},"metadata":{},"sourceType":"module"}